products = [
{id: 1,  name: "Boules de Geïsha",  descr: "Ceci est un Boules de Geïsha", category: 1, price: "30", seller: "seller1",  region: "Auvergne", location: "location1",  zip_code: "12345", img1: "images/thumb.png", img2: "images/thumb.png", img3: "images/thumb.png", created_at: new Date(), phone_number:"0622334455"},
{id: 2,  name: "Canard Vibrant",  descr: "Ceci est un Canard Vibrant", category: "Canard Vibrant", price: "59,99", seller: "seller2",  region: "Aquitaine", location: "location2",  zip_code: "12345", img1: "images/thumb.png", img2: "images/thumb.png", img3: "images/thumb.png", created_at: new Date(), phone_number:"0622334455"},
{id: 3,  name: "Oeufs Vibrants",  descr: "Ceci est un Oeufs Vibrants", category: "Oeufs Vibrants", price: "28", seller: "seller3",  region: "Alsace", location: "location3",  zip_code: "12345", img1: "images/thumb.png", img2: "images/thumb.png", img3: "images/thumb.png", created_at: new Date(), phone_number:"0622334455"},
{id: 4,  name: "Sextoy Rabbit",  descr: "Ceci est un Sextoy Rabbit", category: "Sextoy Rabbit", price: "59", seller: "seller4",  region: "Bourgogne", location: "location4",  zip_code: "12345", img1: "images/thumb.png", img2: "images/thumb.png", img3: "images/thumb.png", created_at: new Date(), phone_number:"0622334455"},
{id: 5,  name: "Coffrets & Accessoires",  descr: "Ceci est un Coffrets & Accessoires", category: "Coffrets & Accessoires", price: "10.00", seller: "seller5",  region: "Bretagne", location: "location5",  zip_code: "12345", img1: "images/thumb.png", img2: "images/thumb.png", img3: "images/thumb.png", created_at: new Date(), phone_number:"0622334455"},
{id: 6,  name: "Gode & Godemichet",  descr: "Ceci est un Gode & Godemichet", category: "Gode & Godemichet", price: "130", seller: "seller6",  region: "Centre", location: "location6",  zip_code: "12345", img1: "images/thumb.png", img2: "images/thumb.png", img3: "images/thumb.png", created_at: new Date(), phone_number:"0622334455"},
{id: 7,  name: "Gode Ceinture",  descr: "Ceci est un Gode Ceinture", category: "Gode Ceinture", price: "25", seller: "seller7",  region: "Corse", location: "location7",  zip_code: "12345", img1: "images/thumb.png", img2: "images/thumb.png", img3: "images/thumb.png", created_at: new Date(), phone_number:"0622334455"},
{id: 8,  name: "Sextoys Anal",  descr: "Ceci est un Sextoys Anal", category: "Sextoys Anal", price: "12", seller: "seller8",  region: "Limousin", location: "location8",  zip_code: "12345", img1: "images/thumb.png", img2: "images/thumb.png", img3: "images/thumb.png", created_at: new Date(), phone_number:"0622334455"},
{id: 9,  name: "Vibromasseurs",  descr: "Ceci est un Vibromasseurs", category: "Vibromasseurs", price: "8", seller: "seller9",  region: "Lorraine", location: "location9",  zip_code: "12345", img1: "images/thumb.png", img2: "images/thumb.png", img3: "images/thumb.png", created_at: new Date(), phone_number:"0622334455"},
{id: 10, name: "Poupée Gonflabe", descr: "Ceci est une Poupée Gonflabe", category: "Poupée Gonflabe", price: "1200", seller: "seller10", region: "Picardie", location: "location10", zip_code: "12345", img1: "images/thumb.png", img2: "images/thumb.png", img3: "images/thumb.png", created_at: new Date(), phone_number:"0622334455"}
];


regions = [
{ name: "Toute la france", value: "" },
{ name: "Alsace", value: "Alsace" },
{ name: "Aquitaine", value: "Aquitaine" },
{ name: "Auvergne", value: "Auvergne"},
{ name: "Basse-Normandie" },
{ name: "Bourgogne", value: "Bourgogne" },
{ name: "Bretagne", value: "Bretagne" },
{ name: "Centre", value: "Centre" },
{ name: "Champagne-Ardenne", value: "Champagne-Ardenne" },
{ name: "Corse", value: "Corse" },
{ name: "Franche-Comté", value: "Franche-Comté" },
{ name: "Haute-Normandie", value: "Haute-Normandie" },
{ name: "Île-de-France", value: "Île-de-France" },
{ name: "Languedoc-Roussillon", value: "Languedoc-Roussillon" },
{ name: "Limousin", value: "Limousin" },
{ name: "Lorraine", value: "Lorraine" },
{ name: "Midi-Pyrénées", value: "Midi-Pyrénées" },
{ name: "Nord-Pas-de-Calais", value: "Nord-Pas-de-Calais" },
{ name: "Pays de la Loire", value: "Pays de la Loire" },
{ name: "Picardie", value: "Picardie" },
{ name: "Poitou-Charentes", value: "Poitou-Charentes" },
{ name: "Provence-Alpes-Côte d'Azur", value: "Provence-Alpes-Côte d'Azur" },
{ name: "Rhône-Alpes", value: "Rhône-Alpes" }
];

categories = [
{ name: "Toutes les categories", value: "" },
{ name: "Boules de Geïsha" },
{ name: "Canard Vibrant" },
{ name: "Oeufs Vibrants" },
{ name: "Sextoy Rabbit" },
{ name: "Coffrets & Accessoires" },
{ name: "Gode & Godemichet" },
{ name: "Gode Ceinture" },
{ name: "Machine de l'Amour" },
{ name: "Sextoys Anal" },
{ name: "Stimulateurs Clitoridiens" },
{ name: "Vibromasseurs" },
{ name: "Masturbateur Homme" },
{ name: "Poupée Gonflabe" },
{ name: "Stimulateur Prostatique" },
{ name: "Anneaux & Gaines de Pénis" },
{ name: "Gode & Plug" },
{ name: "Gode Ceinture Homme" }
];

appControllers.controller('mainController', function($scope, $route, $routeParams){
	
	$scope.params = $routeParams;

});

appControllers.controller('productsController', ['$scope', '$sce', 'ProductsService',
    function productsController($scope, $sce, ProductsService) {
        $scope.regions = regions;
        $scope.categories = categories;
        $scope.products = [];
        ProductsService.all().success(function(data) {
            $scope.products = data;
        }).error(function(data, status) {
            console.log(status);
            console.log(data);
        });
    }
    ]);

appControllers.controller('productController', ['$scope', '$routeParams', '$location', '$sce', 'ProductsService', 'AuthenticationService',
    function productController($scope, $routeParams, $location, $sce, ProductsService, AuthenticationService) {

        $scope.product = {};
        var id = $routeParams.id;
        ProductsService.get(id).success(function(data) {
            console.log(data);
            $scope.product = data;
            $scope.isAuth = AuthenticationService.isAuthenticated;
        }).error(function(data, status) {
            console.log(status);
            console.log(data);
            $location.path("/products");
        });

        $scope.deleteProduct = function deleteProduct(id) {
            if (id != undefined) {
                ProductsService.delete(id).success(function(data) {
                    $location.path("/products");
                }).error(function(status, data) {
                    console.log(status);
                    console.log(data);
                });
            }
        }
    }
]);

appControllers.controller('productMessageController', function($scope, $routeParams){

	var id = $routeParams.id;
	$scope.product = products[id-1];
});

appControllers.controller('productNewController', ['$scope', '$location', 'ProductsService',
    function productNewController($scope, $location, ProductsService) {
        $scope.regions = regions;
        $scope.categories = categories;
        
        $scope.save = function save(product) {
            if (product != undefined 
                && product.name != undefined
                && product.category != undefined
                && product.region != undefined) {
                ProductsService.create(product).success(function(data) {
                    console.log(data);
                        // $location.path("/admin");
                    }).error(function(status, data) {
                        console.log(status);
                        console.log(data);
                    });
                }
            }
        }
        ]);

appControllers.controller('productEditController', ['$scope', '$routeParams', '$location', '$sce', 'ProductsService', 'AuthenticationService',
    function productEditController($scope, $routeParams, $location, $sce, ProductsService, AuthenticationService) {

        $scope.product = {};
        var id = $routeParams.id;
        if (!AuthenticationService.isAuthenticated)
            $location.path("/product/"+id);
        $scope.regions = regions;
        $scope.categories = categories;
        ProductsService.get(id).success(function(data) {
            console.log(data);
            $scope.product = data;

        }).error(function(data, status) {
            console.log(status);
            console.log(data);
        });

        $scope.save = function save(product) {
            console.log(product);
            if (product != undefined 
                && product.name != undefined
                && product.category != undefined
                && product.region != undefined) {                  
                ProductsService.update(product).success(function(data) {
                    $location.path("/product/"+product.id);
                }).error(function(status, data) {
                    console.log(status);
                    console.log(data);
                });
            }
        }
    }
    ]);

appControllers.controller('adminUserController', ['$scope', '$location', '$window', 'UserService', 'AuthenticationService',
	function adminUserController($scope, $location, $window, UserService, AuthenticationService){

     $scope.signIn = function signIn (username, password) {
        if (username != null && password != null) {
            UserService.signIn(username, password).success(function(data) {
               console.log(data);
               AuthenticationService.isAuthenticated = true;
               $window.sessionStorage.token = data.token;
               $location.path("/");
           })
            .error(function(status, data) {
                console.log(status);
                console.log(data);
            });
        }
    }

    $scope.register = function register (username, email, phone, password, passwordConfirm){
     console.log(username);
     if (false){
        console.log("already connected");
    }
    else {
        UserService.register(username, email, phone, password, passwordConfirm)
        .success(function(){
           $location.path("/signin");
       })
        .error(function(status, data){
           console.log("error");
           console.log(status);
           console.log(data);
       })
    }
}

$scope.logOut = function logOut() {

    if (AuthenticationService.isAuthenticated) {    
       console.log("logout");
       UserService.logOut().success(function(data) {
           console.log("logout");
           AuthenticationService.isAuthenticated = false;
           delete $window.sessionStorage.token;
           $location.path("/");
       }).error(function(status, data) {
        console.log(status);
        console.log(data);
    });
   }
   else {
    $location.path("/admin/login");
}
}
}
]);